{"version":3,"file":"static/webpack/static\\development\\pages\\items.js.058ebecff3a42bdcefa8.hot-update.js","sources":["webpack:///./components/DeleteItem.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport { Mutation } from \"react-apollo\";\r\nimport { All_ITEMS_QUERY } from \"./Items\";\r\nimport gql from \"graphql-tag\";\r\n\r\nconst DELETE_ITEM_MUTATION = gql`\r\n\tmutation DELETE_ITEM_MUTATION($id: ID!) {\r\n\t\tdeleteItem(id: $id) {\r\n\t\t\tid\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport class DeleteItem extends Component {\r\n\t/**\r\n\t * VERY IMPORTANT\r\n\t\t\t The method below [update()] is used to update the client side. For example: \r\n\t\t\t\t\t When the item is deleted on the frontend, it requires the user to manually refresh the page to show the item being deleted\r\n\t\t\t\t\t The purpose of this method is to automatically refetch the items from the backend so the cache have the most up to dated information\r\n\t * \r\n\t */\r\n\r\n\t//Cache is provided by apollo\r\n\t//cache is a list of items on the DOM\r\n\t//payload is the items that are coming back after a request\r\n\tupdate = (cache, payload) => {\r\n\t\t// manually update the cache on the client so it matches the server\r\n\r\n\t\t// 1. Read the cache for the items we want\r\n\t\tconst data = cache.readQuery({ query: All_ITEMS_QUERY });\r\n\t\tconsole.log(\"data: \", data);\r\n\t\tconsole.log(\"payload: \", payload);\r\n\r\n\t\t// 2. Filter the deleted items out of the page\r\n\t\t// data.items = data.items.filter(item => data.id !== payload.data)\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Mutation\r\n\t\t\t\tmutation={DELETE_ITEM_MUTATION}\r\n\t\t\t\tvariables={{\r\n\t\t\t\t\tid: this.props.id,\r\n\t\t\t\t}}\r\n\t\t\t\tupdate={this.update}\r\n\t\t\t>\r\n\t\t\t\t{(deleteItem, { error }) => (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tif (confirm(\"Are you sure you want to delete this?\")) {\r\n\t\t\t\t\t\t\t\tdeleteItem();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{this.props.children}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\t\t\t</Mutation>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DeleteItem;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AAQA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AACA;AADA;AACA;AADA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAaA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AAGA;AACA;AACA;AAvBA;AAAA;AACA;AADA;AAAA;AAAA;AAwBA;AACA;AAAA;AAEA;AACA;AACA;AADA;AAGA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAaA;AA9CA;AACA;AADA;AAAA;AAiDA;;;;A","sourceRoot":""}