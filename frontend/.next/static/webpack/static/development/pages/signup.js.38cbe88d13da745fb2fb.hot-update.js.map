{"version":3,"file":"static/webpack/static\\development\\pages\\signup.js.38cbe88d13da745fb2fb.hot-update.js","sources":["webpack:///./components/Signup.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport { Mutation } from \"react-apollo\";\r\nimport gql from \"graphql-tag\";\r\nimport Form from \"./styles/Form\";\r\nimport Error from \"./ErrorMessage\";\r\nimport { formatError, GraphqlError } from \"graphql\";\r\nimport { CURRENT_USER_QUERY } from \"./User\";\r\nimport Router from \"next/router\";\r\n\r\nconst SIGNUP_MUTATION = gql`\r\n\tmutation SIGNUP_MUTATION(\r\n\t\t$email: String!\r\n\t\t$name: String!\r\n\t\t$password: String!\r\n\t) {\r\n\t\tsignup(email: $email, name: $name, password: $password) {\r\n\t\t\tid\r\n\t\t\temail\r\n\t\t\tname\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nclass Signup extends Component {\r\n\tstate = {\r\n\t\tname: \"\",\r\n\t\tpassword: \"\",\r\n\t\temail: \"\",\r\n\t};\r\n\tsaveToState = (e) => {\r\n\t\tthis.setState({ [e.target.name]: e.target.value });\r\n\t};\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Mutation\r\n\t\t\t\tmutation={SIGNUP_MUTATION}\r\n\t\t\t\trefetchQueries={[{ query: CURRENT_USER_QUERY }]}\r\n\t\t\t\tvariables={this.state}\r\n\t\t\t>\r\n\t\t\t\t{(signup, { error, loading, data }) => {\r\n\t\t\t\t\t// console.log(\"return data: \", data);\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * VERY IMPORTANT\r\n\t\t\t\t\t\t *  When the form is submitted, often time the information in the form will come back as url form and the email and password are exposed\r\n\t\t\t\t\t\t *  This could lead to various of serious security issues as these information will be saved in history and exposed to outside threats\r\n\t\t\t\t\t\t *\r\n\t\t\t\t\t\t * To prevent this from happening, use [method=\"post\"]\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\t<Form\r\n\t\t\t\t\t\t\tmethod=\"post\"\r\n\t\t\t\t\t\t\tonSubmit={async (e) => {\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tconst res = await signup();\r\n\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\tthis.setState({ name: \"\", email: \"\", password: \"\" });\r\n\t\t\t\t\t\t\t\tRouter.push({ pathname: \"/\" });\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<fieldset disabled={loading} aria-busy={loading}>\r\n\t\t\t\t\t\t\t\t<h2>Sign Up for An Account</h2>\r\n\t\t\t\t\t\t\t\t<Error error={error} />\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"email\">\r\n\t\t\t\t\t\t\t\t\tEmail\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"email\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.email}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.saveToState}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"name\">\r\n\t\t\t\t\t\t\t\t\tName\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"name\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.name}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.saveToState}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"password\">\r\n\t\t\t\t\t\t\t\t\tPassword\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.password}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.saveToState}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t\t\t<button type=\"submit\">Sign Up!</button>\r\n\t\t\t\t\t\t\t</fieldset>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t);\r\n\t\t\t\t}}\r\n\t\t\t</Mutation>\r\n\t\t);\r\n\t}\r\n}\r\nexport default Signup;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAaA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AAHA;AACA;AAIA;AACA;AACA;AACA;;;;;;AAAA;AAAA;AACA;AAAA;AAEA;AACA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AACA;AACA;AACA;;;;;;;AAOA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AApDA;AAwDA;AAGA;;;;AA7EA;AACA;AA8EA;;;;A","sourceRoot":""}